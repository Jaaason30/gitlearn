
<view class="container">

<!-- é¡¶éƒ¨è‡ªå®šä¹‰å¯¼èˆªæ  -->
<view
  class="top-bar"
  style="padding-top:{{statusBarHeight}}px; height:{{statusBarHeight + 44}}px;"
>
  <!-- èœå• -->
  <view class="icon-btn" bindtap="onMenuTap">
    <text class="icon-emoji">â˜°</text>
  </view>

  <!-- é€‰é¡¹å¡ -->
  <view class="top-tabs">
    <block wx:for="{{topTabs}}" wx:key="key" wx:for-item="tab">
      <view
        class="tab-touch"
        bindtap="onTopTabTap"
        data-key="{{tab}}"
      >
        <text
          class="tab-text {{activeTopTab === tab ? 'tab-active' : ''}}"
        >{{tab}}</text>
      </view>
    </block>
  </view>

  <!-- æœç´¢ -->
  <view class="icon-btn" bindtap="onSearchTap">
    <text class="icon-emoji">ğŸ”</text>
  </view>
</view>

<!-- ä¸»å†…å®¹åŒºï¼šä¸‹æ‹‰åˆ·æ–° + ä¸Šæ‹‰åŠ è½½ -->
<scroll-view
  class="content"
  scroll-y="true"
  refresher-enabled="true"
  refresher-triggered="{{refreshing}}"
  bindrefresherrefresh="onPullDownRefresh"
  bindscrolltolower="onReachBottom"
  lower-threshold="100"
  style="padding-bottom:{{fabBottom + fabSize + 10}}px;"
>

  <!-- Banner è½®æ’­ -->
  <swiper
    class="banner"
    indicator-dots="true"
    indicator-color="#ccc"
    indicator-active-color="#d81e06"
    autoplay="true"
    interval="3000"
    duration="500"
  >
    <block wx:for="{{bannerList}}" wx:key="index" wx:for-item="item">
      <swiper-item>
        <image src="{{item.src}}" class="banner-image" mode="aspectFill" />
      </swiper-item>
    </block>
  </swiper>

  <!-- å¸–å­ä¸¤åˆ—ç€‘å¸ƒæµ -->
  <view class="list-content">
    <block wx:for="{{posts}}" wx:key="uuid" wx:for-index="idx" wx:for-item="item">
      <view class="card {{(idx + 1) % 2 === 0 ? 'card-even' : ''}}">
        <image src="{{item.imageUrl}}" class="card-image" mode="aspectFill" />
        <text class="card-title">{{item.title}}</text>
        <view class="card-footer">
          <view class="author-container">
            <image src="{{item.authorAvatar}}" class="author-avatar" />
            <text class="author">{{item.authorName}}</text>
          </view>
          <view class="likes-row">
            <text class="like-icon">ğŸ‘</text>
            <text class="likes-text">{{item.likes}}</text>
          </view>
        </view>
      </view>
    </block>
  </view>
</scroll-view>

<!-- åº•éƒ¨å¯¼èˆªæ  -->
<view class="bottom-bar">
  <block wx:for="{{bottomTabs}}" wx:key="key" wx:for-item="tab">
    <view
      class="bottom-item {{activeBottom === tab.key ? 'bottom-item-active' : ''}}"
      bindtap="onBottomTabTap"
      data-key="{{tab.key}}"
    >
      <text class="bottom-icon" style="color:{{activeBottom === tab.key ? '#d81e06' : '#888'}}">{{tab.icon}}</text>
      <text class="bottom-label {{activeBottom === tab.key ? 'bottom-label-active' : ''}}">{{tab.label}}</text>
    </view>
  </block>
</view>

<!-- ä¸­å¤® FAB æŒ‰é’® -->
<view
  class="fab"
  style="bottom:{{fabBottom}}px; width:{{fabSize}}px; height:{{fabSize}}px;"
  bindtap="onFabTap"
>
  <text class="plus">+</text>
</view>

<!-- å‘å¸–å¼¹å±‚ï¼šè¿™é‡Œå‡è®¾ä½ å·²ç»å°è£…äº† custom-action-sheet ç»„ä»¶ -->
<custom-action-sheet
  visible="{{sheetVisible}}"
  bind:close="onActionSheetClose"
  bind:selectGallery="onSelectGallery"
  bind:takePhoto="onTakePhoto"
  bind:textPost="onTextPost"
  bind:templatePost="onTemplatePost"
/>
</view>
